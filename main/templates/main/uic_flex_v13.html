{% load rics %}
<div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Security Provider RICS</dt>
    <dd class="govuk-summary-list__value"><code>{{ flex.data.issuingDetail.securityProviderNum }}</code></dd>
</div>
{% with org=flex.data.issuingDetail.securityProviderNum|rics %}
    {% if org %}
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">Security Provider</dt>
            <dd class="govuk-summary-list__value">
                {% include 'main/rics.html' with org=org %}
            </dd>
        </div>
    {% endif %}
{% endwith %}
<div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Issuer RICS</dt>
    <dd class="govuk-summary-list__value"><code>{{ flex.data.issuingDetail.issuerNum }}</code></dd>
</div>
{% with org=flex.data.issuingDetail.issuerNum|rics %}
    {% if org %}
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">Issuer</dt>
            <dd class="govuk-summary-list__value">
                {% include 'main/rics.html' with org=org %}
            </dd>
        </div>
    {% endif %}
{% endwith %}
<div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Issuing time</dt>
    <dd class="govuk-summary-list__value">{{ flex.issuing_time|date:"F d, Y H:i" }}</dd>
</div>
<div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Specimen</dt>
    <dd class="govuk-summary-list__value">
        {% if flex.data.issuingDetail.specimen %}
            <strong class="govuk-tag govuk-tag--green">Yes</strong>
        {% else %}
            <strong class="govuk-tag govuk-tag--red">No</strong>
        {% endif %}
    </dd>
</div>
<div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Secure paper ticket</dt>
    <dd class="govuk-summary-list__value">
        {% if flex.data.issuingDetail.securePaperTicket %}
            <strong class="govuk-tag govuk-tag--green">Yes</strong>
        {% else %}
            <strong class="govuk-tag govuk-tag--red">No</strong>
        {% endif %}
    </dd>
</div>
<div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Activated</dt>
    <dd class="govuk-summary-list__value">
        {% if flex.data.issuingDetail.activated %}
            <strong class="govuk-tag govuk-tag--green">Yes</strong>
        {% else %}
            <strong class="govuk-tag govuk-tag--red">No</strong>
        {% endif %}
    </dd>
</div>
<div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Currency</dt>
    <dd class="govuk-summary-list__value"><code>{{ flex.data.issuingDetail.currency }}</code></dd>
</div>
<div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Issuer PNR</dt>
    <dd class="govuk-summary-list__value"><code>{{ flex.data.issuingDetail.issuerPNR }}</code></dd>
</div>
{% if flex.data.travelerDetail %}
    <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Travelers</dt>
        <dd class="govuk-summary-list__value">
            {% for traveler in flex.data.travelerDetail.traveler %}
                <div class="govuk-summary-card">
                    <div class="govuk-summary-card__title-wrapper">
                        <h2 class="govuk-summary-card__title">Traveler #{{ forloop.counter }}</h2>
                    </div>
                    <div class="govuk-summary-card__content">
                        <dl class="govuk-summary-list">
                            {% if traveler.firstName %}
                                <div class="govuk-summary-list__row">
                                    <dt class="govuk-summary-list__key">Forename</dt>
                                    <dd class="govuk-summary-list__value">{{ traveler.firstName }}</dd>
                                </div>
                            {% endif %}
                            {% if traveler.secondName %}
                                <div class="govuk-summary-list__row">
                                    <dt class="govuk-summary-list__key">Middle name</dt>
                                    <dd class="govuk-summary-list__value">{{ traveler.secondName }}</dd>
                                </div>
                            {% endif %}
                            {% if traveler.lastName %}
                                <div class="govuk-summary-list__row">
                                    <dt class="govuk-summary-list__key">Surname</dt>
                                    <dd class="govuk-summary-list__value">{{ traveler.lastName }}</dd>
                                </div>
                            {% endif %}
                            {% if traveler.title %}
                                <div class="govuk-summary-list__row">
                                    <dt class="govuk-summary-list__key">Title</dt>
                                    <dd class="govuk-summary-list__value">{{ traveler.title }}</dd>
                                </div>
                            {% endif %}
                            {% if traveler.idCard %}
                                <div class="govuk-summary-list__row">
                                    <dt class="govuk-summary-list__key">ID Card Number</dt>
                                    <dd class="govuk-summary-list__value"><code>{{ traveler.idCard }}</code></dd>
                                </div>
                            {% endif %}
                            {% if traveler.passportId %}
                                <div class="govuk-summary-list__row">
                                    <dt class="govuk-summary-list__key">Passport Number</dt>
                                    <dd class="govuk-summary-list__value"><code>{{ traveler.passportId }}</code></dd>
                                </div>
                            {% endif %}
                        </dl>
                    </div>
                </div>
            {% endfor %}
        </dd>
        {% if flex.data.travelerDetail.preferredLanguage %}
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">Traveler preferred language</dt>
                <dd class="govuk-summary-list__value"><code>{{ flex.data.travelerDetail.preferredLanguage }}</code></dd>
            </div>
        {% endif %}
        {% if flex.data.travelerDetaul.groupName %}
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">Traveler group name</dt>
                <dd class="govuk-summary-list__value"><code>{{ flex.data.travelerDetail.groupName }}</code></dd>
            </div>
        {% endif %}
    </div>
{% endif %}
